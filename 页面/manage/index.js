(()=>{var e,t={76:e=>{var t=/^(?:submit|button|image|reset|file)$/i,r=/^(?:input|select|textarea|keygen)/i,n=/(\[[^\[\]]*\])/g;function s(e,t,r){if(0===t.length)return r;var n=t.shift(),o=n.match(/^\[(.+?)\]$/);if("[]"===n)return e=e||[],Array.isArray(e)?e.push(s(null,t,r)):(e._values=e._values||[],e._values.push(s(null,t,r))),e;if(o){var a=o[1],l=+a;isNaN(l)?(e=e||{})[a]=s(e[a],t,r):(e=e||[])[l]=s(e[l],t,r)}else e[n]=s(e[n],t,r);return e}function o(e,t,r){if(t.match(n))s(e,function(e){var t=[],r=new RegExp(n),s=/^([^\[\]]*)/.exec(e);for(s[1]&&t.push(s[1]);null!==(s=r.exec(e));)t.push(s[1]);return t}(t),r);else{var o=e[t];o?(Array.isArray(o)||(e[t]=[o]),e[t].push(r)):e[t]=r}return e}function a(e,t,r){return r=r.replace(/(\r)?\n/g,"\r\n"),r=(r=encodeURIComponent(r)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+r}e.exports=function(e,n){"object"!=typeof n?n={hash:!!n}:void 0===n.hash&&(n.hash=!0);for(var s=n.hash?{}:"",l=n.serializer||(n.hash?o:a),c=e&&e.elements?e.elements:[],i=Object.create(null),d=0;d<c.length;++d){var u=c[d];if((n.disabled||!u.disabled)&&u.name&&r.test(u.nodeName)&&!t.test(u.type)){var m=u.name,v=u.value;if("checkbox"!==u.type&&"radio"!==u.type||u.checked||(v=void 0),n.empty){if("checkbox"!==u.type||u.checked||(v=""),"radio"===u.type&&(i[u.name]||u.checked?u.checked&&(i[u.name]=!0):i[u.name]=!1),null==v&&"radio"==u.type)continue}else if(!v)continue;if("select-multiple"!==u.type)s=l(s,m,v);else{v=[];for(var y=u.options,g=!1,f=0;f<y.length;++f){var h=y[f],p=n.empty&&!h.value,S=h.value||p;h.selected&&S&&(g=!0,s=n.hash&&"[]"!==m.slice(m.length-2)?l(s,m+"[]",h.value):l(s,m,h.value))}!g&&n.empty&&(s=l(s,m,""))}}}if(n.empty)for(var m in i)i[m]||(s=l(s,m,""));return s}},787:(e,t,r)=>{"use strict";var n=r(836),s=r(285);function o(e,t){const r=document.querySelector(".alert");r.classList.add(e?"alert-success":"alert-danger"),r.innerHTML=t,r.classList.add("show"),setTimeout((()=>{r.classList.remove(e?"alert-success":"alert-danger"),r.innerHTML="",r.classList.remove("show")}),3e3)}var a=r(76),l=r.n(a);function c(e,t,r,n){const s=e.closest(".mb-3"),o=s.querySelector(".feedback-text"),a=s.querySelector(".bi");if(t(e.value)){if(e.classList.remove("is-invalid"),e.classList.add("is-valid"),!a){const e=document.createElement("i");e.classList.add("bi","bi-check-circle","text-success"),s.appendChild(e)}o&&o.remove()}else{if(e.classList.remove("is-valid"),e.classList.add("is-invalid"),!o){const e=document.createElement("div");e.classList.add("feedback-text","text-danger"),e.textContent=n,s.appendChild(e)}a&&a.remove()}}function i(e,t,r="",n=""){const s=document.querySelector(`.${e}ModalBody`),o=s.querySelector(`.bad-${e}-text`),a=s.querySelector(`.success-${e}-text`);if(t){if(o&&feedbackText.remove(),!a){const t=document.createElement("div");t.classList.add(`success-${e}-text`,"text-success"),t.textContent=r,s.appendChild(t)}}else if(a&&a.remove(),!o){const t=document.createElement("div");t.classList.add(`bad-${e}-text`,"text-danger"),t.textContent=n||r,s.appendChild(t),r&&document.querySelector(`.${e}Form`).reset()}}!function(){const e=document.querySelector("#loginModal"),t=new n.Modal(e),r=JSON.parse(localStorage.getItem("topBarData"));console.log(r),null===r?(document.querySelector(".topBar").style.display="none",document.querySelector(".btnControlArea").style.display="none",t.show(),function(e){const t=document.querySelector("#loginModal"),r=t.querySelector("#Mytel"),n=t.querySelector("#Password");r.addEventListener("blur",(function(){c(r,(e=>/^1\d{10}$/.test(e)),0,"请输入有效的11位手机号，且以1开头")})),n.addEventListener("blur",(()=>{c(n,(e=>e.length>=8&&e.length<=20),0,"密码长度在8到20位数字之间")})),t.querySelector(".wantRegisBtn").addEventListener("click",(()=>{const e=document.querySelector(".loginForm").nextElementSibling;e&&e.remove()}));t.querySelector(".loginBtn").addEventListener("click",(async a=>{a.preventDefault();try{const a=await s.A.post("/api/waiterLogin",{Mytel:r.value,Password:n.value});if(200===a.status){const{Mytel:t,Limitid:r,Waitername:n}=a.data.topBarData;o(!0,`${a.data.message}`),localStorage.setItem("topBarData",JSON.stringify(a.data.topBarData));const s=document.querySelector(".topBar"),l=document.querySelector(".btnControlArea"),c=s.querySelector(".waiterLoginName");"none"===s.style.display&&(s.style.display="flex"),"none"===l.style.display&&(l.style.display="block"),c.dataset.limitId=`${r}`,c.innerHTML=2===r?n?`服务员 ${n}`:"服务员":"管理员/老板",s.querySelector(".waiterLoginTel").innerHTML=t,console.log(s.style.display),console.log(r),console.log(c),e.hide()}else i("login",!1,`${a.data.message}`),console.log("登录失败:"+a.data.message),t.querySelector(".loginForm").reset(),t.querySelectorAll(".loginInput").forEach((e=>{const t=e.querySelector("input");t.classList.remove("is-invalid","is-valid");const r=t.nextElementSibling;r&&r.remove()}))}catch(e){console.log("后端出错: "+e),i("login",!1,"","服务器遇到问题，请联系技术人员")}}))}(t)):(document.querySelector(".waiterLoginName").innerHTML=2===r.Limitid?`服务员 ${r.Waitername}`:"管理者/老板",document.querySelector(".waiterLoginName").dataset.limitId=r.Limitid.toString(),document.querySelector(".waiterLoginTel").innerHTML=r.Mytel)}(),document.querySelectorAll(".goBackToIntro").forEach((e=>e.addEventListener("click",(()=>location.href="../intro/index.html")))),document.querySelector(".goBackIntro").addEventListener("click",(()=>location.href="../intro/index.html")),document.querySelector(".goBackOrder").addEventListener("click",(()=>location.href="../order/index.html")),function(){const e=document.querySelector("#registerModal");console.log(e);const t=e.querySelector("#Waitername"),r=e.querySelector("#Mytel"),n=e.querySelector("#Password"),o=e.querySelector("#correctPass");e.querySelector(".retrunToLoginBtn").addEventListener("click",(()=>{e.querySelector(".registerForm").reset(),e.querySelectorAll(".regisInput").forEach((e=>{const t=e.querySelector("input");t.classList.remove("is-invalid","is-valid");const r=t.nextElementSibling;r&&r.remove()}));const t=document.querySelector(".registerForm").nextElementSibling;t&&t.remove()})),t.addEventListener("blur",(function(){c(t,(e=>e.length>=2),0,"姓名至少需要2个字")})),r.addEventListener("blur",(function(){c(r,(e=>/^1\d{10}$/.test(e)),0,"请输入有效的11位手机号，且以1开头")})),n.addEventListener("blur",(()=>{c(n,(e=>e.length>=8&&e.length<=20),0,"密码长度在8到20位数字之间")})),n.addEventListener("focus",(()=>{o.value="";const e=o.closest(".mb-3"),t=e.querySelector(".feedback-text"),r=e.querySelector(".bi");t&&t.remove(),r&&r.remove(),o.classList.remove("is-invalid"),o.classList.remove("is-valid")})),e.querySelector("#confirmCode").addEventListener("blur",(function(){c(e.querySelector("#confirmCode"),(e=>"123456"===e),0,"验证码错误")})),o.addEventListener("blur",(function(){const e=o.value===n.value,t=o.closest(".mb-3"),r=t.querySelector(".feedback-text"),s=t.querySelector(".bi");if(""===o.value&&""===n.value){if(o.classList.add("is-invalid"),!r){const e=document.createElement("div");e.classList.add("feedback-text","text-danger"),e.textContent="您未输入密码",t.appendChild(e)}s&&s.remove()}else if(e){if(o.classList.remove("is-invalid"),o.classList.add("is-valid"),!s){const e=document.createElement("i");e.classList.add("bi","bi-check-circle","text-success"),t.appendChild(e)}r&&r.remove()}else{if(o.classList.remove("is-valid"),o.classList.add("is-invalid"),!r){const e=document.createElement("div");e.classList.add("feedback-text","text-danger"),e.textContent="两次输入密码不一致",t.appendChild(e)}s&&s.remove()}})),e.querySelector(".registerBtn").addEventListener("click",(async e=>{e.preventDefault();const t=document.querySelector(".registerForm");console.log(t.querySelector("#Mytel").value);const r=l()(t,{hash:!0,empty:!0});if(console.log(r),Object.values(r).every((e=>null==e||""===e)))i("register",!1,"","您还未填写数据！");else try{const e=await s.A.post("/api/waiterRegister",r);200===e.status?i("register",!0,`${e.data.message}`):(i("register",!1,`${e.data.message}`),console.log("注册失败:"+e.data.message))}catch(e){console.log("后端出错: "+e),i("register",!1,"","服务器遇到问题，请联系技术人员")}}))}(),function(){const e=document.querySelector(".wantChangePassword"),t=document.querySelector("#changePasswordModal");console.log(t);const r=new n.Modal(t);e.addEventListener("click",(()=>{if(1==+document.querySelector(".waiterLoginName").dataset.limitId)o(!1,"如需修改密码，联系技术人员！");else{r.show();const e=t.querySelector("#Password"),n=t.querySelector("#confirmPassword");console.log(e),e.addEventListener("blur",(()=>{c(e,(e=>e.length>=8&&e.length<=20),0,"密码长度在8到20位数字之间")})),e.addEventListener("focus",(()=>{n.value="";const e=n.closest(".mb-3"),t=e.querySelector(".feedback-text"),r=e.querySelector(".bi");t&&t.remove(),r&&r.remove(),n.classList.remove("is-invalid"),n.classList.remove("is-valid")})),n.addEventListener("blur",(function(){const t=n.value===e.value,r=n.closest(".mb-3"),s=r.querySelector(".feedback-text"),o=r.querySelector(".bi");if(""===n.value&&""===e.value){if(n.classList.add("is-invalid"),!s){const e=document.createElement("div");e.classList.add("feedback-text","text-danger"),e.textContent="您未输入密码",r.appendChild(e)}o&&o.remove()}else if(t){if(n.classList.remove("is-invalid"),n.classList.add("is-valid"),!o){const e=document.createElement("i");e.classList.add("bi","bi-check-circle","text-success"),r.appendChild(e)}s&&s.remove()}else{if(n.classList.remove("is-valid"),n.classList.add("is-invalid"),!s){const e=document.createElement("div");e.classList.add("feedback-text","text-danger"),e.textContent="两次输入密码不一致",r.appendChild(e)}o&&o.remove()}})),t.querySelector(".changePasswordBtn").addEventListener("click",(async e=>{e.preventDefault();const n=t.querySelector(".changePasswordForm"),a=l()(n,{hash:!0,empty:!0});a.Mytel=document.querySelector(".waiterLoginTel").innerHTML;try{const e=await s.A.post("/api/waiterChangePassword",a);200===e.status?o(!0,`${e.data.message}`):(o(!1,`${e.data.message}`),console.log("更改失败:"+e.data.message))}catch(e){console.log("后端出错: "+e),o(!1,"服务器遇到问题，请联系技术人员")}finally{t.querySelector(".changePasswordForm").reset(),t.querySelectorAll(".changePasswordInput").forEach((e=>{const t=e.querySelector("input");t.classList.remove("is-invalid","is-valid");const r=t.nextElementSibling;r&&r.remove()})),r.hide()}}))}}))}(),function(){const e=document.querySelector("#deleteWaiterModal"),t=new n.Modal(e);document.querySelector(".wantdeleteWaiter").addEventListener("click",(()=>{if(2==+document.querySelector(".waiterLoginName").dataset.limitId)o(!1,"注销账号请联系老板处理");else{t.show();const r=e.querySelector("#Mytel");r.addEventListener("blur",(function(){c(r,(e=>/^1\d{10}$/.test(e)),0,"请输入有效的11位手机号，且以1开头")})),e.querySelector(".deleteWaiterBtn").addEventListener("click",(async r=>{r.preventDefault();const n=e.querySelector(".deleteWaiterForm"),a=l()(n,{hash:!0,empty:!0});try{const e=await s.A.post("/api/deleteWaiter",a);200===e.status?o(!0,`${e.data.message}`):(console.log(a),o(!1,`${e.data.message}`),console.log("删除失败:"+e.data.message))}catch(e){console.log("后端出错: "+e),o(!1,"服务器遇到问题，请联系技术人员")}finally{e.querySelector(".deleteWaiterForm").reset(),e.querySelectorAll(".deleteWaiterInput").forEach((e=>{const t=e.querySelector("input");t.classList.remove("is-invalid","is-valid");const r=t.nextElementSibling;r&&r.remove()})),t.hide()}}))}}))}(),function(){const e=document.querySelector("#changeOrderStatusModal"),t=new n.Modal(e);document.querySelector(".wantchangeOrderStatus").addEventListener("click",(()=>{t.show()}));const r=e.querySelector("#Orderid"),a=e.querySelector("#Statusname");r.addEventListener("blur",(function(){c(r,(e=>/^[1-9][0-9]*$/.test(e)),0,"订单编号是大于0的正整数")})),a.addEventListener("blur",(function(){c(a,(e=>function(e){switch(e){case"正在制作":case"已支付":case"已完成":case"退款成功":return!0;default:return!1}}(e)),0,"您输入的状态名错误，请检查")})),e.querySelector(".changeOrderStatusBtn").addEventListener("click",(async r=>{r.preventDefault();const n=e.querySelector(".changeOrderStatusForm"),a=l()(n,{hash:!0,empty:!0});try{const e=await s.A.post("/api/changeOneOrderStatus",a);200===e.status?o(!0,""+(e.data.message.split(" ").join(`${a.Orderid}`)+a.Statusname+"！")):(console.log(a),o(!1,`${e.data.message}`),console.log("删除失败:"+e.data.message))}catch(e){console.log("后端出错: "+e),o(!1,"服务器遇到问题，请联系技术人员")}finally{e.querySelector(".changeOrderStatusForm").reset(),e.querySelectorAll(".changeOrderStatusInput").forEach((e=>{const t=e.querySelector("input");t.classList.remove("is-invalid","is-valid");const r=t.nextElementSibling;r&&r.remove()})),t.hide()}}))}()}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var o=r[e]={exports:{}};return t[e].call(o.exports,o,o.exports,n),o.exports}n.m=t,e=[],n.O=(t,r,s,o)=>{if(!r){var a=1/0;for(d=0;d<e.length;d++){for(var[r,s,o]=e[d],l=!0,c=0;c<r.length;c++)(!1&o||a>=o)&&Object.keys(n.O).every((e=>n.O[e](r[c])))?r.splice(c--,1):(l=!1,o<a&&(a=o));if(l){e.splice(d--,1);var i=s();void 0!==i&&(t=i)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,s,o]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={690:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var s,o,[a,l,c]=r,i=0;if(a.some((t=>0!==e[t]))){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(c)var d=c(n)}for(t&&t(r);i<a.length;i++)o=a[i],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},r=self.webpackChunkrestaurant_order_manage_system=self.webpackChunkrestaurant_order_manage_system||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var s=n.O(void 0,[341],(()=>n(787)));s=n.O(s)})();